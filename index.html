<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projetos de Robótica — Exploratória Digital</title>
  <meta name="description" content="Catálogo de projetos de robótica: carrinho explorador, OBR, sensores, IoT e mais." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- Header -->
  <header class="sticky top-0 z-50 backdrop-blur bg-white/80 border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="#" class="flex items-center gap-2">
        <span class="text-xl font-extrabold">Robótica</span>
        <span class="text-slate-500">/ Projetos</span>
      </a>
      <nav class="hidden sm:flex items-center gap-4 text-sm">
        <a class="hover:underline" href="#sobre">Sobre</a>
        <a class="hover:underline" href="#contato">Contato</a>
        <a class="hover:underline" href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-white to-slate-100">
    <div class="max-w-6xl mx-auto px-4 py-12">
      <h1 class="text-3xl sm:text-5xl font-extrabold leading-tight">Catálogo de Projetos de Robótica</h1>
      <p class="mt-3 text-slate-600 max-w-3xl">Lista pública com os projetos desenvolvidos no curso e no projeto social: carrinhos autônomos, sensores, OBR, IoT, dashboards e muito mais. Os projetos são carregados automaticamente de <code>projects.json</code>.</p>

      <!-- Filtros -->
      <div class="mt-6 grid sm:flex gap-3">
        <input id="busca" type="search" placeholder="Buscar por nome, tags ou componentes…" class="w-full sm:w-96 px-4 py-2 rounded-xl border border-slate-300 focus:outline-none focus:ring focus:ring-sky-200" />
        <select id="filtroTag" class="px-4 py-2 rounded-xl border border-slate-300 bg-white">
          <option value="">Todas as tags</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Lista de projetos -->
  <main class="max-w-6xl mx-auto px-4 pb-16">
    <div id="alerta" class="hidden mb-4 p-3 rounded-xl border border-amber-300 bg-amber-50 text-amber-800 text-sm"></div>
    <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Rodapé -->
  <footer class="border-t border-slate-200 bg-white" id="sobre">
    <div class="max-w-6xl mx-auto px-4 py-10 grid sm:grid-cols-3 gap-8 text-sm">
      <div>
        <h3 class="font-bold mb-2">Sobre</h3>
        <p class="text-slate-600">Esta página lista projetos de robótica com Arduino/ESP, eletrônica e programação desenvolvidos por estudantes. Código aberto para fins educacionais.</p>
      </div>
      <div>
        <h3 class="font-bold mb-2">Como contribuir</h3>
        <ol class="list-decimal ml-5 text-slate-600 space-y-1">
          <li>Abra o repositório do projeto</li>
          <li>Leia o README e as <em>issues</em></li>
          <li>Envie um PR com melhorias (código, documentação, fotos)</li>
        </ol>
      </div>
      <div id="contato">
        <h3 class="font-bold mb-2">Contato</h3>
        <p class="text-slate-600">exploratoriadigital.com.br • LinkedIn • GitHub</p>
      </div>
    </div>
    <div class="text-center text-xs text-slate-500 pb-8">© <span id="ano"></span> Exploratória Digital — Uso educacional</div>
  </footer>

  <script>
    const grid = document.getElementById('grid');
    const busca = document.getElementById('busca');
    const filtroTag = document.getElementById('filtroTag');
    const alerta = document.getElementById('alerta');
    let projetos = [];

    function tagsUnicas() {
      const set = new Set();
      projetos.forEach(p => (p.tags||[]).forEach(t => set.add(t)));
      return Array.from(set).sort();
    }

    function preencherSelectTags() {
      filtroTag.innerHTML = '<option value="">Todas as tags</option>';
      tagsUnicas().forEach(t => {
        const opt = document.createElement('option');
        opt.value = t;
        opt.textContent = t;
        filtroTag.appendChild(opt);
      });
    }

    function cardProjeto(p) {
      const alt = (p.titulo||'Projeto').replace(/\s+/g, ' ');
      const repoLink = p.repo ? `<a class="text-sky-700 hover:underline" href="${p.repo}" target="_blank" rel="noopener">Ver repositório →</a>` : '<span class="text-slate-400">Repositório em breve</span>';
      const demoLink = p.demo ? `<a class="text-sky-700 hover:underline" href="${p.demo}" target="_blank" rel="noopener">Demo</a>` : '';
      const right = demoLink ? `<span class="flex gap-3 items-center">${demoLink}<span class="text-slate-400">•</span><span class="text-slate-500">${p.status||''}</span></span>` : `<span class="text-slate-500">${p.status||''}</span>`;
      const img = p.imagem || 'https://picsum.photos/800/450?random=15';
      return `
        <article class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition">
          <a href="${p.repo||'#'}" target="${p.repo?'_blank':'_self'}" rel="${p.repo?'noopener':''}">
            <div class="aspect-video bg-slate-100 overflow-hidden">
              <img src="${img}" alt="${alt}" class="w-full h-full object-cover" onerror="this.src='https://picsum.photos/800/450?random=4'"/>
            </div>
          </a>
          <div class="p-4">
            <h3 class="font-bold text-lg mb-1">${p.titulo||'Projeto sem título'}</h3>
            <p class="text-slate-600 text-sm mb-3">${p.descricao||''}</p>
            <div class="flex flex-wrap gap-2 mb-3">
              ${(p.tags||[]).map(t => `<span class='px-2 py-1 text-xs rounded-full bg-slate-100 border border-slate-200'>${t}</span>`).join('')}
            </div>
            <div class="flex items-center justify-between text-sm">
              ${repoLink}
              ${right}
            </div>
          </div>
        </article>`;
    }

    function render() {
      const q = (busca.value || '').toLowerCase();
      const tag = filtroTag.value;
      const filtrados = projetos.filter(p => {
        const texto = ((p.titulo||'') + ' ' + (p.descricao||'') + ' ' + (p.tags||[]).join(' ')).toLowerCase();
        const passaBusca = !q || texto.includes(q);
        const passaTag = !tag || (p.tags||[]).includes(tag);
        return passaBusca && passaTag;
      });
      grid.innerHTML = filtrados.map(cardProjeto).join('') || '<div class="text-slate-500">Nenhum projeto encontrado.</div>';
    }

    async function carregarProjetos() {
      try {
        const resp = await fetch('projects.json', { cache: 'no-store' });
        if (!resp.ok) throw new Error('Não foi possível carregar projects.json');
        projetos = await resp.json();
        preencherSelectTags();
        render();
      } catch (e) {
        alerta.textContent = 'Aviso: não foi possível carregar o arquivo projects.json. Mostrando um exemplo estático.';
        alerta.classList.remove('hidden');
        projetos = [{
          titulo: 'Exemplo — Carrinho Explorador',
          descricao: 'Robô autônomo com HC-SR04 e L298N que desvia de obstáculos.',
          repo: '#',
          imagem: 'https://picsum.photos/800/450?random=7',
          tags: ['Arduino','HC-SR04','L298N'],
          status: 'Exemplo'
        }];
        preencherSelectTags();
        render();
      }
    }

    busca.addEventListener('input', render);
    filtroTag.addEventListener('change', render);

    carregarProjetos();

    // Ano atual no rodapé
    document.getElementById('ano').textContent = new Date().getFullYear();
  </script>
</body>
</html>